<html>
<head>
	<title>Dr. Mingw</title>
</head>
<body>
	<h1>About</h1>

	<p>Dr. Mingw is a <i>Just-in-Time (JIT)</i> debugger. When the application throws 
	an unhandled exception, Dr. Mingw attaches itself to the application and collects 
	information about the exception, using the available debugging information.</p>

	<h1>Features</h1>

	<p>Dr. Mingw can read debugging information in <em>Stabs</em> formats &#151; generated 
	by the Gnu C/C++ Compiler, and in a PDB file &#151; generated by the Microsoft 
	Visual C++ Compiler.</p>

	<p>Windows NT/2000 platform is supported, as well as Windows 95/98. On older Windows 
	versions though, the IMAGEHLP.DLL isn't included or it's a rather old version. 
	Dr. Mingw doesn't require it, but relies upon it to resolve symbols in modules 
	compiled by the Microsoft tools. See <a href="#imagehlp">The 
	IMAGEHLP.DLL Saga</a> for more information. </p>

	<h1>Installation</h1>

	<p>If you didn't download the self-installing package, to install enter</p>

	<blockquote> 
		<pre><b>drmingw -i</b></pre>
	</blockquote>

	<p>Dr. Mingw will register itself as the JIT debugger by writting into the
	system registry. On Windows NT/2000 make sure you have Administrator
	rights. See <a href="#jit">Enabling Just-in-Time (JIT) Debugging</a> for
	more information.</p>

	<p>If the installation is sucessful, the following message box should appear:</p>

	<p align="center"><img src="install.gif" alt="installation dialog"/></p>

	<p>To enable other options they must be set them allong with the <b>-i</b>
	option. For example,</p>

	<blockquote>
		<pre><b>drmingw -i -v </b></pre>
	</blockquote>

	<p>If you still have trouble installing, edit the included<b>
	drmingw.reg</b> file to reflect the <b>drmingw.exe</b> executable path and
	load it on the system registry.</p>

	<h1>Usage</h1>

	<p>You can test Dr. Mingw by running the sample<b> test.exe</b>. Depending
	of your Windows version, you'll see a familiar dialog:</p>

	<p align="center"><img src="exception-nt.gif" alt="Windows general protection fault dialog"/></p>

	<p>If you request to debug the program, Dr. Mingw will attach to the
	faulting application, collect information about the exception, and display
	the dialog</p>

	<p align="center"><img src="sample.gif" alt="sample report"/></p>

	<p>To resolve the addresses it's necessary to compile the application with
	debugging information. In case of address is in a DLL with no debugging
	information, it will resolve to the precedent exported symbol.</p>

	<h1>Command Line Options</h1>

	<p>The Dr. Mingw command line uses the following syntax:</p>

<pre>
<b>drmingw </b>[<b>-h | --help</b>] [<b>-V | --version</b>] [<b>-i | --install</b>] [<b>-a | --auto</b>] [<b>-u | --uninstall</b>]
[<b>-p</b> <i>pid</i> | <b>--process-id=</b><i>pid</i>]  [<b>-e</b> <i>event</i> | <b>--event=</b><i>event</i>]
[<b>-v | --verbose</b>]
</pre>

	<p>The following table describes the Dr. Mingw command-line options. All
	comand-line options are case-sensitive. </p>

	<table width="78%" summary="command-line options">
		<tr> 
			<th align=left width=10%>Option</th>
			<th align=left width=25%>&nbsp;</th>
			<th align=left width=65%>Action</th>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-h</b></pre>
			</td>
			<td width=25%> 
				<pre><b>--help</b></pre>
			</td>
			<td width=65%>Print help and exit </td>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-V</b></pre>
			</td>
			<td width=25%> 
				<pre><b>--version</b></pre>
			</td>
			<td width=65%>Print version and exit</td>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-i</b></pre>
			</td>
			<td width=25%> 
				<pre><b>--install</b></pre>
			</td>
			<td width=65%>Install as the default JIT debugger</td>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-a</b></pre>
			</td>
			<td width=25%> 
				<pre><b>--auto</b></pre>
			</td>
			<td width=65%>Automatically start (used with <b>-i</b> | <b>--install</b>)</td>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-u</b></pre>
			</td>
			<td width=25%> 
				<pre><b>--uninstall</b></pre>
			</td>
			<td width=65%>Uninstall</td>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-p</b> <i>pid</i></pre>
			</td>
			<td width=25%> 
				<pre><b>--process-id=</b><i>pid</i></pre>
			</td>
			<td width=65%>Attach to the process with the given identifier</td>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-e</b> <i>event</i></pre>
			</td>
			<td width=25%><pre><b>--event=</b><i>event</i></pre></td>
			<td width=65%>Signal an event after process is attached</td>
		</tr>
		<tr> 
			<td width=10%> 
				<pre><b>-v</b></pre>
			</td>
			<td width=25%> 
				<pre><b>--verbose</b></pre>
			</td>
			<td width=65%>Verbose output</td>
		</tr>
	</table>

	<h1><a name="imagehlp"></a>The IMAGEHLP.DLL Saga</h1>

	<p><em>[Taken from several Bugslayer articles of MSJ.]</em></p>

	<p>The IMAGEHLP.DLL symbol engine first appeared in Windows NT® 4.0. The
	beta Windows NT 5.0 SDK had new parts of IMAGEHLP.H that dealt with source
	and line information. In the meantime, the November 1998 Platform SDK
	showed and the IMAGEHLP.DLL that shipped with it supported the new source
	and line handling.  There are several different versions of IMAGEHLP.DLL.
	The only one that does not support the new source and line information is
	the original Windows NT 4.0 version. </p>

	<p>The IMAGEHLP.DLL version 5.00.1678.1 dynamically links to MSPDB50.DLL.
	It first tries to load MSDBI.DLL, and if that is not found it will load
	MSPDB50.DLL, so it works with both Visual C++® 5.0 and 6.0. To use it with
	Visual C++ 6.0, copy MSPDB50.DLL to MSPDB60.DLL. If you want to get symbols
	from the field, you will have to compile with CodeView® symbols and use
	.DBG files to get them. Keep in mind that MSPDB50.DLL, like MSDBI.DLL, is
	not redistributable.  </p>

	<p>The IMAGEHLP.DLL version 5.00.1878.1, which comes with the Windows 2000
	Beta 2 Platform SDK, hard links against MSDBI.DLL instead of dynamically
	loading MSPDB50.DLL as in earlier versions to read PDB files. The problem
	is that MSDBI.DLL is not redistributable.</p>

	<p>IMAGEHLP.DLL now uses DEBUGHLP.DLL.</p>

	<p>If you want IMAGEHLP.DLL, it's available in:</p>

	<ul>
		<li> 
			Platform SDK
		</li>
		<li> 
			WinDBG Debugger
		</li>
		<li> 
			Windows 2000
		</li>
	</ul>

	<h1>Suggested Reading</h1>
	
	<ul>
		<li> <a
		href="http://www.microsoft.com/msj/0197/exception/exception.htm">A
		Crash Course on the Depths of Win32 Structured Exception Handling, MSJ
		January 1997</a> </li>
		
		<li> <a
		href="http://www.microsoft.com/msj/0497/hood/hood0497.htm">MSJEXHND -
		Part 1, Under the Hood, MSJ April 1997</a></li>
		
		<li> <a
		href="http://www.microsoft.com/msj/0597/hood0597.htm">MSJEXHND -
		Part 2, Under the Hood, MSJ May 1997</a></li>
		
		<li><a
		href=http://www.microsoft.com/msj/0898/bugslayer0898.htm>Bugslayer,
		MSJ, August 1998</a></li>
			
		<li> <a
		href="http://msdn.microsoft.com/library/techart/msdn_debug.htm"> The
		Win32 Debugging Application Programming Interface</a></li>
	</ul>

</body>
</html>

<!-- vim: set ai ts=4 sw=4 noet syntax=html: -->
